"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[194],{552:(e,t,l)=>{l.d(t,{g:()=>i});var n=l(2115);function i(e,t){let[l,i]=(0,n.useState)(t),a=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{try{let t=localStorage.getItem(e);null!=t&&i(JSON.parse(t))}catch(e){}a.current=!0},[e]),(0,n.useEffect)(()=>{if(!a.current)return;let t=setTimeout(()=>{try{localStorage.setItem(e,JSON.stringify(l))}catch(e){}},250);return()=>clearTimeout(t)},[e,l]),[l,i]}},997:(e,t,l)=>{l.d(t,{A:()=>m});var n=l(5155),i=l(2115),a=l(5567),s=l(9708);async function u(){return(await (0,s.GG)((0,s.P)((0,s.rJ)(a.db,"priceLists"),(0,s.My)("displayName")))).docs.map(e=>{var t;return{id:e.id,displayName:(null==(t=e.data())?void 0:t.displayName)||e.id}})}async function r(e){let t=(0,s.rJ)(a.db,"priceLists",e,"items"),l=await (0,s.GG)((0,s.P)(t,(0,s.My)("familySlug"),(0,s.AB)(5e3))),n=new Map;l.forEach(e=>{let t=e.data()||{};t.familySlug&&n.set(t.familySlug,t.familyDisplay||t.familySlug)});let i=Array.from(n.entries()).map(e=>{let[t,l]=e;return{slug:t,label:l}});return i.sort((e,t)=>e.label.localeCompare(t.label,void 0,{numeric:!0})),i}async function c(e,t){let l=(0,s.P)((0,s.rJ)(a.db,"priceLists",e,"items"),(0,s._M)("familySlug","==",t)),n=(await (0,s.GG)(l)).docs.map(e=>{var t,l,n;let i=e.data()||{};return{id:e.id,sizeSlug:i.sizeSlug||e.id,sizeLabel:i.sizeDisplay||i.sizeSlug||e.id,unit:i.unit||"",supplierPrice:null!=(t=i.basePrice)?t:null,markupPct:null!=(l=i.markupPct)?l:null,priceWithMarkup:null!=(n=i.priceWithMarkup)?n:null,raw:i}}),i=new Map;for(let e of n)i.has(e.sizeSlug)||i.set(e.sizeSlug,e);return Array.from(i.values()).sort((e,t)=>e.sizeLabel.localeCompare(t.sizeLabel,void 0,{numeric:!0}))}function o(e){var t;let{value:l,onChange:a,options:s=[],placeholder:u="Select…",disabled:r=!1,loading:c=!1,ariaLabel:o}=e,d=(0,i.useId)(),m="".concat(d,"-listbox"),p=(0,i.useRef)(null),h=(0,i.useRef)(null),[b,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)(""),[y,x]=(0,i.useState)(0),N=(0,i.useMemo)(()=>s.find(e=>String(e.value)===String(l)),[s,l]),w=(0,i.useMemo)(()=>{let e=(g||"").trim().toLowerCase();return e?s.filter(t=>(t.label||"").toLowerCase().includes(e)):s},[s,g]),j=(0,i.useMemo)(()=>N?[{value:"__CLEAR__",label:"✖ Clear selection"},...w]:w,[w,N]);function P(e){if(e){if("__CLEAR__"===e.value){var t;null==a||a(null!=(t=null==e?void 0:e.value)?t:""),f(!1),v("");return}e.value!==l&&(null==a||a(e.value)),f(!1),v(e=>""===e?e:"")}}(0,i.useEffect)(()=>{if(!j.length)return void x(e=>-1===e?e:-1);(y<0||y>=j.length)&&x(0)},[j,y]),(0,i.useEffect)(()=>{function e(e){h.current&&(h.current.contains(e.target)||f(!1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,i.useEffect)(()=>{b&&!g&&(null==N?void 0:N.label)&&(v(e=>e===N.label?e:N.label),requestAnimationFrame(()=>{let e=p.current;e&&e.setSelectionRange(e.value.length,e.value.length)}))},[b,N,g]),(0,i.useEffect)(()=>{x(0),b&&v("")},[s,b]);let S=b?g:null!=(t=null==N?void 0:N.label)?t:"";return(0,n.jsxs)("div",{ref:h,className:"combo",role:"combobox","aria-expanded":b,"aria-haspopup":"listbox","aria-owns":m,"aria-controls":m,children:[(0,n.jsx)("input",{ref:p,type:"text",className:"ew-select combo-input",placeholder:c?"Loading…":u,value:S,onChange:function(e){v(e.target.value),b||f(!0)},onFocus:function(){r||f(!0)},onKeyDown:function(e){if(!b&&("ArrowDown"===e.key||"Enter"===e.key))return void f(!0);if(b)if("ArrowDown"===e.key){if(e.preventDefault(),!j.length)return;x(e=>Math.min(e+1,j.length-1))}else if("ArrowUp"===e.key){if(e.preventDefault(),!j.length)return;x(e=>Math.max(e-1,0))}else"Enter"===e.key?(e.preventDefault(),j.length&&y>=0&&P(j[y])):"Escape"===e.key&&(e.preventDefault(),f(!1),v(e=>""===e?e:""))},"aria-autocomplete":"list","aria-controls":m,"aria-label":o,disabled:r||c,autoComplete:"off",spellCheck:"false"}),(0,n.jsx)("div",{className:"combo-caret","aria-hidden":!0}),b&&(0,n.jsx)("ul",{id:m,role:"listbox",className:"combo-list",children:c?(0,n.jsx)("li",{className:"combo-empty",children:"Loading…"}):j.length?j.map((e,t)=>(0,n.jsx)("li",{role:"option","aria-selected":"__CLEAR__"!==e.value&&String(l)===String(e.value),className:"combo-option"+(t===y?" active":"")+("__CLEAR__"===e.value?" danger":""),onPointerDown:t=>{t.preventDefault(),P(e)},onMouseEnter:()=>x(t),onMouseDown:e=>{e.preventDefault()},title:e.label,children:e.label},"".concat(e.value,"-").concat(t))):(0,n.jsx)("li",{className:"combo-empty",children:"No matches"})})]})}let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).toLowerCase().replace(/[^a-z0-9]+/g," ").trim()};function m(e){let{onSelect:t,compact:l=!1,defaultVendor:a="Gillies & Prittie Warehouse",defaultFamilyLabel:s,preferredSeries:m,defaultSizeLabel:p}=e,[h,b]=(0,i.useState)([]),[f,g]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[x,N]=(0,i.useState)(""),[w,j]=(0,i.useState)(""),[P,S]=(0,i.useState)(""),F=(0,i.useRef)(!1),L=(0,i.useRef)(""),k=(0,i.useRef)(""),C=(0,i.useRef)(""),E=(0,i.useRef)(""),q=(0,i.useRef)(!1),_=(0,i.useRef)(!1),M=(0,i.useRef)(!1),R=e=>N(t=>t===z(e)?t:z(e)),D=e=>j(t=>t===z(e)?t:z(e)),A=e=>S(t=>t===z(e)?t:z(e)),z=e=>""===e||null==e?"":String(e),H=(0,i.useRef)(""),I=(0,i.useRef)(t);(0,i.useEffect)(()=>{I.current=t},[t]),(0,i.useEffect)(()=>{let e=!0;return(async()=>{let t=await u();e&&b(t||[])})(),()=>{e=!1}},[]),(0,i.useEffect)(()=>{if(F.current||q.current||!h.length||x)return;let e=d(a),t=h.find(t=>d(t.displayName||t.id)===e),l=h.find(t=>d(t.displayName||"").includes(e)),n=h.find(e=>{let t=d(e.displayName||e.id);return t.includes("gillies")&&t.includes("prittie")}),i=t||l||n||h[0];F.current=!0,(null==i?void 0:i.id)&&R(i.id)},[h,x,a,R]),(0,i.useEffect)(()=>{let e=L.current;if(!x||x===e){L.current=x;return}let t=!!(w||P);w&&D(""),P&&A(""),g(e=>e.length?[]:e),k.current="",y(e=>e.length?[]:e),E.current="",M.current=!1,t&&I.current&&"null"!==H.current&&(H.current="null",I.current(null));let l=!0;return(async()=>{let e=await r(x);if(l&&(g(e||[]),!_.current&&C.current!==x&&(null==e?void 0:e.length))){let t=null;if(s){let l=d(s);t=e.find(e=>d(e.label)===l)||e.find(e=>d(e.label).includes(l))}t||(t=e.find(e=>{let t=d(e.label);return t.includes("spf")&&(t.includes("#2")||t.includes(" 2"))})||e[0]),C.current=x,(null==t?void 0:t.slug)&&D(t.slug)}})(),L.current=x,()=>{l=!1}},[x]),(0,i.useEffect)(()=>{if(!x||!w)return;let e="".concat(x,"::").concat(w,"::").concat(m||"");if(k.current===e)return;let t=!!P;t&&A(""),y(e=>e.length?[]:e),E.current="",M.current=!1,t&&I.current&&"null"!==H.current&&(H.current="null",I.current(null));let l=!0;return(async()=>{let t=await c(x,w);if(l&&(y(t||[]),!M.current&&E.current!==e&&(null==t?void 0:t.length))){let l=null;if(p){let e=d(p);l=t.find(t=>d(t.sizeLabel)===e)||t.find(t=>d(t.sizeLabel).includes(e))}if(!l&&m){let e=d(m).replace(/[^0-9x]/g,""),n=e=>d(String(e||"")).replace(/[^0-9x]/g,"");l=t.find(t=>n(t.sizeLabel).startsWith(e))||t.find(t=>n(t.sizeLabel).includes(e))}l||(l=t[0]),E.current=e,(null==l?void 0:l.id)&&A(l.id)}})(),k.current=e,()=>{l=!1}},[x,w,m,p]),(0,i.useEffect)(()=>{if(!P&&"null"!==H.current){var e;H.current="null",null==(e=I.current)||e.call(I,null)}},[P]);let W=(0,i.useMemo)(()=>{var e;if(!x||!w||!P)return null;let t=f.find(e=>String(e.slug)===String(w)),l=v.find(e=>String(e.id)===String(P));return t&&l?{vendorId:x,vendorName:(null==(e=h.find(e=>e.id===x))?void 0:e.displayName)||x,family:t.slug,familyLabel:t.label,item:l}:null},[x,w,P,h,f,v]);(0,i.useEffect)(()=>{let e=W?"".concat(x,"|").concat(w,"|").concat(P):"null";if(e!==H.current){var t;H.current=e,null==(t=I.current)||t.call(I,W)}},[W]);let T=(0,i.useCallback)(e=>{""===e&&(q.current=!0),R(e)},[R]),B=(0,i.useCallback)(e=>{if(""===e&&(_.current=!0,P&&A(""),y(e=>e.length?[]:e),"null"!==H.current)){var t;H.current="null",null==(t=I.current)||t.call(I,null)}D(e)},[P,A,D]),O=(0,i.useCallback)(e=>{""===e&&(M.current=!0),A(e)},[A]),G=(0,i.useMemo)(()=>h.map(e=>({value:String(e.id),label:e.displayName})),[h]),$=(0,i.useMemo)(()=>f.map(e=>({value:String(e.slug),label:e.label})),[f]),J=(0,i.useMemo)(()=>v.map(e=>({value:String(e.id),label:e.sizeLabel})),[v]),U=(0,n.jsx)(o,{ariaLabel:"Vendor",value:x,onChange:T,options:G,placeholder:"Select vendor…",disabled:!h.length}),V=(0,n.jsx)(o,{ariaLabel:"Family",value:w,onChange:B,options:$,placeholder:"Family…",disabled:!f.length}),Q=(0,n.jsx)(o,{ariaLabel:"Size",value:P,onChange:O,options:J,placeholder:"Size…",disabled:!v.length});return l?(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[U,V,Q]}):(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[U,V,Q]})}},1340:(e,t,l)=>{l.d(t,{A:()=>i});var n=l(5155);function i(e){let{onClick:t,size:l=20,title:i="Remove",label:a="Remove",src:s="/icons/trash.png",className:u="",disabled:r=!1}=e;return(0,n.jsx)("button",{type:"button",className:"ew-btn ew-icon-btn ".concat(u),onClick:t,"aria-label":a,title:i,disabled:r,children:(0,n.jsx)("img",{src:s,width:l,height:l,alt:""})})}},2875:(e,t,l)=>{l.d(t,{DP:()=>i,O1:()=>u,QF:()=>a,vE:()=>r});var n=l(5753);let i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.xb)(e).includes("lvl")},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,n.xb)(e).includes("versa")},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,n.xb)(e);return t.includes("spf#2")||t.includes("spf2")||t.includes("syp#2")||t.includes("syp2")||t.includes("syp#1")||t.includes("syp1")||"pt"===t||t.includes("treated")},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s(e)||(0,n.xb)(e).includes("frt")||(0,n.xb)(e).includes("fire rated lumber")||(0,n.xb)(e).includes("douglas fir")||(0,n.xb)(e).includes("pt")||(0,n.xb)(e).includes("hem fir")||(0,n.xb)(e).includes("hemfir")},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,n.xb)(e);return t.includes("spf#2")||t.includes("spf2")||"pt"===t||t.includes("treated")||t.includes("hem fir")||t.includes("hemfir")||t.includes("syp#2")||t.includes("syp2")||t.includes("syp#1")||t.includes("syp1")||t.includes("frt")||t.includes("fire rated lumber")||t.includes("douglas fir")}},3688:(e,t,l)=>{l.d(t,{jO:()=>s,Vg:()=>r,y_:()=>o,bh:()=>i,uX:()=>c,NH:()=>u,FN:()=>a,oN:()=>N,M4:()=>d,wm:()=>m,q6:()=>h,d6:()=>y,B4:()=>x,$8:()=>g,TI:()=>v,bs:()=>b,$p:()=>p,C9:()=>f});var n=l(5753);function i(e){let{lengthLF:t,boardLenFt:l,wastePct:i=0,item:a,unit:s="pcs"}=e,u=Number(t||0),r=Number(l||0),c=r>0?u/r:0,o=(0,n.$u)(c,i),d=(0,n.Ed)(a),m=Number(d*o)||0;return{qtyRaw:c,qtyFinal:o,unit:s,unitPrice:d,subtotal:m,boardLenFt:r}}function a(e){let{lengthLF:t,spacingIn:l=16,multiplier:i=1,wastePct:a=0,item:s,unit:u="pcs"}=e,r=(Math.floor(12*Number(t||0)/Math.max(1,Number(l||16)))+1)*Math.max(1,Number(i||1)),c=(0,n.$u)(r,a),o=(0,n.Ed)(s),d=Number(o*c)||0;return{qtyRaw:r,qtyFinal:c,unit:u,unitPrice:o,subtotal:d}}function s(e){let{lengthLF:t,heightFt:l,boardLenFt:i,wastePct:a=0,item:s,unit:u="pcs"}=e,r=Number(t||0),c=Number(l||0),o=Number(i||0),d=(o>0?r/o:0)*Math.max(0,Math.ceil(c/4)-1),m=(0,n.$u)(d,a),p=(0,n.Ed)(s),h=Number(p*m)||0;return{qtyRaw:d,qtyFinal:m,unit:u,unitPrice:p,subtotal:h}}function u(e){let{lengthLF:t,heightFt:l,wastePct:i=0,item:a,unit:s="sheet"}=e,u=Number(t||0)*Number(l||0)/32,r=(0,n.$u)(u,i),c=(0,n.Ed)(a),o=Number(c*r)||0;return{qtyRaw:u,qtyFinal:r,unit:s,unitPrice:c,subtotal:o}}function r(e){let{isLVL:t,headerLF:l,lvlPieces:i,lvlLength:a,boardLenFt:s,wastePct:u=5,item:r}=e,c=0,o="pcs";t?(c=Number(i||0)*Number(a||0),o="lf"):(c=Number(s||0)?Number(l||0)/Number(s):0,o="pcs");let d=(0,n.$u)(c,u),m=(0,n.Ed)(r),p=Number(m*d)||0;return{qtyRaw:c,qtyFinal:d,unit:o,unitPrice:m,subtotal:p}}function c(e){let{isLinearLF:t,pieces:l,heightFt:i,piecesPerPost:a,numPosts:s,wastePct:u=5,item:r}=e,c=0,o="pcs";t?(c=Number(l||0)*Number(i||0),o="lf"):(c=Number(a||0)*Number(s||0),o="pcs");let d=(0,n.$u)(c,u),m=(0,n.Ed)(r),p=Number(m*d)||0;return{qtyRaw:c,qtyFinal:d,unit:o,unitPrice:m,subtotal:p}}function o(e){let{headerLFPool:t,wastePct:l=5,item:i,unit:a="sheet"}=e,s=Number(t||0)/3/32*2,u=(0,n.$u)(s,l),r=(0,n.Ed)(i),c=Number(r*u)||0;return{qtyRaw:s,qtyFinal:u,unit:a,unitPrice:r,subtotal:c}}function d(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function m(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function p(e){let{panelBandLF:t,bandHeightFt:l,item:n,unit:i="sheet",wastePct:a=10}=e;return{...u({lengthLF:t,heightFt:l,item:n,unit:i,wastePct:a}),wastePct:a}}function h(e){let{extLengthLF:t,bandHeightFt:l,item:n,unit:i="sheet",wastePct:a=10}=e;return{...u({lengthLF:t,heightFt:l,item:n,unit:i,wastePct:a}),wastePct:a}}function b(e){let{openingsLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function f(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function g(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function v(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function y(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function x(e){let{lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}function N(e){let{blockingLF:t,boardLenFt:l,item:n,unit:a,wastePct:s=10}=e;return{...i({lengthLF:t,boardLenFt:l,item:n,unit:a,wastePct:s}),wastePct:s}}},3911:(e,t,l)=>{l.d(t,{A:()=>a});var n=l(5155),i=l(2115);function a(e){let{title:t,bar:l,summary:a,header:s,actions:u,defaultOpen:r=!0,open:c,onOpenChange:o,hideHeaderWhenCollapsed:d=!1,children:m,className:p=""}=e,h="boolean"==typeof c,[b,f]=(0,i.useState)(!!r),g=h?c:b,v=(0,i.useCallback)(e=>{let t="function"==typeof e?e(g):!!e;h||f(t),null==o||o(t)},[h,o,g]),y=(0,i.useCallback)(()=>v(!g),[v,g]),x=(0,i.useRef)(null),N=(0,i.useId)();(0,i.useEffect)(()=>{let e=x.current;if(!e)return;let t=e.scrollHeight;e.style.maxHeight=g?"".concat(t,"px"):"0px",e.style.opacity=g?"1":"0",e.setAttribute("aria-hidden",g?"false":"true")},[g,m]);let w=e=>"function"==typeof e?e({open:g,toggle:y,id:N}):e,j=w(l),P=w(a),S=w(s);return(0,n.jsxs)("section",{className:"acc ".concat(g?"acc--open":""," ").concat(p),children:[j?(0,n.jsx)("div",{className:"acc__summary",children:j}):(0,n.jsxs)(n.Fragment,{children:[(g||!d)&&(0,n.jsxs)("div",{className:"acc__header",style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:g&&S?S:(0,n.jsxs)("button",{type:"button",className:"acc__button","aria-expanded":g,"aria-controls":N,onClick:y,title:g?"Collapse":"Expand",children:[(0,n.jsx)("img",{src:g?"/icons/down.png":"/icons/minimize.png",alt:g?"Collapse section":"Expand section",width:16,height:16,className:"acc__chev",style:{display:"inline-block",verticalAlign:"middle"}}),(0,n.jsx)("span",{className:"acc__title",children:t})]})}),u?(0,n.jsx)("div",{className:"acc__actions",children:u}):null]}),!g&&P?(0,n.jsx)("div",{className:"acc__summary",children:P}):null]}),(0,n.jsx)("div",{id:N,ref:x,className:"acc__body",children:(0,n.jsx)("div",{className:"acc__bodyInner",children:m})})]})}},5567:(e,t,l)=>{l.d(t,{db:()=>u,hJ:()=>c,j2:()=>r});var n=l(2078),i=l(9708),a=l(2553);let s=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyBWK-vjvOLq1O5p_3uk1Jxr48hf0eo3kCw",authDomain:"inventory-estimator.firebaseapp.com",projectId:"inventory-estimator",storageBucket:"inventory-estimator.firebasestorage.app",messagingSenderId:"867265758215",appId:"1:867265758215:web:54f62bc943ebb1965a16a2"}),u=(0,i.aU)(s),r=(0,a.xI)(s),c=new a.HF},5753:(e,t,l)=>{l.d(t,{$u:()=>a,Ed:()=>s,_3:()=>i,xb:()=>n});let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).toLowerCase().replace(/[^a-z0-9# ]+/g," ").trim()};function i(e){let t=String(e||"").trim(),l="";for(let e=t.length-1;e>=0;e--){let n=t[e];if(n>="0"&&n<="9"){l=n+l;continue}if(l)break}return l?Number(l):null}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.ceil(Number(e||0)*(1+Number(t||0)/100))}function s(e){var t,l,n,i,a,s,u,r,c,o,d;if(!e)return 0;let m=null!=(u=null!=(s=null!=(a=e.supplierPrice)?a:null==(t=e.raw)?void 0:t.basePrice)?s:null==(l=e.raw)?void 0:l.supplierPrice)?u:null,p=null!=(c=null!=(r=e.markupPct)?r:null==(n=e.raw)?void 0:n.markupPct)?c:null;return null!=m&&null!=p?Number(m)*(1+Number(p)/100):Number((null!=(d=null!=(o=e.priceWithMarkup)?o:null==(i=e.raw)?void 0:i.priceWithMarkup)?d:null)||0)}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"})},8194:(e,t,l)=>{l.d(t,{A:()=>y});var n=l(5155),i=l(2115),a=l(997),s=l(552),u=l(3688),r=l(5753),c=l(2875),o=l(3911),d=l(1340);let m=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),p=e=>Number.isFinite(Number(e))?m.format(Number(e)):"—",h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,l=String(e).trim().split(/\s+/),n=l.slice(0,t).join(" ");return l.length>t?"".concat(n,"…"):n||""},b=e=>e&&e.item?b(e.item):e,f=e=>b(e),g=e=>{var t,l,n;return(null==(t=b(e))?void 0:t.unit)||(null==(n=b(e))||null==(l=n.raw)?void 0:l.unit)||"pcs"},v=e=>{var t,l,n,i;return(null==(t=b(e))?void 0:t.sizeDisplay)||(null==(l=b(e))?void 0:l.sizeLabel)||(null==(i=b(e))||null==(n=i.raw)?void 0:n.sizeDisplay)||""};function y(e){var t,l,m,b,y,x,N,w;let{onStatsChange:j,title:P="Exterior walls",onRemove:S,persistKey:F="exterior-0",bottomDefaultFamily:L="SPF#2"}=e,k=(0,i.useRef)(""),[C,E]=(0,i.useState)(0),[q,_]=(0,i.useState)(String(C)),[M,R]=(0,i.useState)(12),[D,A]=(0,i.useState)(16),[z,H]=(0,i.useState)(1),[I,W]=(0,i.useState)({bottomPlate:10,topPlate:10,studs:60,blocking:10,sheathing:20}),[T,B]=(0,i.useState)({bottomPlate:null,topPlate:null,studs:null,blocking:null,sheathing:null}),[O,G]=(0,s.g)("inv:v1:notes:".concat(F),{}),$=e=>O[e]||{plan:"",comment:"",open:!1},J=(e,t)=>G(l=>({...l,[e]:{...$(e),...t}})),U=e=>J(e,{open:!$(e).open}),V=(0,r._3)(v(T.bottomPlate)),Q=null!=V?V:12,K=Number.isFinite(V)?V:0;(0,i.useEffect)(()=>{_(String(C))},[C]);let X=()=>{E(Number(q)||0)},Y=null!=(y=(0,r._3)(v(T.topPlate)))?y:12,Z=null!=(x=(0,r._3)(v(T.blocking)))?x:12,ee=e=>e&&e.item?ee(e.item):e,et=e=>{var t,l,n,i,a,s,u;let r=ee(e);return String(null!=(u=null!=(s=null!=(a=null!=(i=null!=(n=null==r?void 0:r.familyLabel)?n:null==r?void 0:r.familyDisplay)?i:null==r||null==(t=r.raw)?void 0:t.familyDisplay)?a:null==r||null==(l=r.raw)?void 0:l.familyLabel)?s:null==r?void 0:r.family)?u:"").toLowerCase()},el=(0,i.useMemo)(()=>{var e,t,l,n,i,a,s,r,c,o;let d=[];{let l=(0,u.bh)({lengthLF:C,boardLenFt:Q,wastePct:null!=(e=I.bottomPlate)?e:0,item:f(T.bottomPlate),unit:g(T.bottomPlate)});d.push({key:"bottomPlate",label:"Bottom plate",item:f(T.bottomPlate),unit:l.unit,qtyRaw:l.qtyRaw,qtyFinal:l.qtyFinal,unitPrice:l.unitPrice,subtotal:l.subtotal,wastePct:null!=(t=I.bottomPlate)?t:0})}{let e=(0,u.bh)({lengthLF:C,boardLenFt:Y,wastePct:null!=(l=I.topPlate)?l:0,item:f(T.topPlate),unit:g(T.topPlate)});d.push({key:"topPlate",label:"Top plate",item:f(T.topPlate),unit:e.unit,qtyRaw:e.qtyRaw,qtyFinal:e.qtyFinal,unitPrice:e.unitPrice,subtotal:e.subtotal,wastePct:null!=(n=I.topPlate)?n:0})}{let e=(0,u.FN)({lengthLF:C,spacingIn:D,multiplier:z,wastePct:null!=(i=I.studs)?i:0,item:f(T.studs),unit:g(T.studs)});d.push({key:"studs",label:"Studs",item:f(T.studs),unit:e.unit,qtyRaw:e.qtyRaw,qtyFinal:e.qtyFinal,unitPrice:e.unitPrice,subtotal:e.subtotal,wastePct:null!=(a=I.studs)?a:0})}{let e=(0,u.jO)({lengthLF:C,heightFt:M,boardLenFt:Z,wastePct:null!=(s=I.blocking)?s:0,item:f(T.blocking),unit:g(T.blocking)});d.push({key:"blocking",label:"Blocking",item:f(T.blocking),unit:e.unit,qtyRaw:e.qtyRaw,qtyFinal:e.qtyFinal,unitPrice:e.unitPrice,subtotal:e.subtotal,wastePct:null!=(r=I.blocking)?r:0})}{let e=(0,u.NH)({lengthLF:C,heightFt:M,wastePct:null!=(c=I.sheathing)?c:0,item:f(T.sheathing),unit:g(T.sheathing)||"sheet"});d.push({key:"sheathing",label:"Sheathing",item:f(T.sheathing),unit:e.unit,qtyRaw:e.qtyRaw,qtyFinal:e.qtyFinal,unitPrice:e.unitPrice,subtotal:e.subtotal,wastePct:null!=(o=I.sheathing)?o:0})}return d},[T,I,C,M,D,z,Q,Y,Z]),en=(0,i.useMemo)(()=>Object.fromEntries(el.map(e=>[e.key,e])),[el]),ei=(0,i.useMemo)(()=>{let e=el.find(e=>"sheathing"===e.key);return Math.ceil(Number((null==e?void 0:e.qtyFinal)||0))},[el]),ea=/pt/i.test(et(T.bottomPlate))?Math.ceil(Number((null==en||null==(t=en.bottomPlate)?void 0:t.qtyFinal)||0)):0,es=(null!=el?el:[]).find(e=>"sheathing"===e.key||/sheathing/i.test(e.label||"")),eu=/zip/.test(et(null==es?void 0:es.item))?Math.ceil(Number((null==es?void 0:es.qtyFinal)||0)):0,er=(null!=(N=null==en||null==(l=en.bottomPlate)?void 0:l.qtyFinal)?N:0)+(null!=(w=null==en||null==(m=en.topPlate)?void 0:m.qtyFinal)?w:0),ec=Number(C||0),[eo,ed]=(0,i.useState)([]),em=(0,i.useRef)(1),ep=e=>ed(t=>[...t,{id:"x".concat(em.current++),type:e,item:null,wastePct:5,inputs:{}}]),eh=(e,t)=>ed(l=>l.map(l=>l.id===e?{...l,...t}:l));(0,i.useEffect)(()=>{let e=eo.filter(e=>"Header"===e.type&&(0,c.vE)(et(e))).reduce((e,t)=>e+Number(t.inputs.headerLF||0),0),t=eo.some(e=>"Headers infill"===e.type);e>0&&!t&&ed(e=>[...e,{id:"infill",type:"Headers infill",item:null,wastePct:5,inputs:{}}]),0===e&&t&&ed(e=>e.filter(e=>"Headers infill"!==e.type))},[JSON.stringify(eo.map(e=>({t:e.type,f:et(e),lf:e.inputs.headerLF||0})))]);let eb=(0,i.useMemo)(()=>{let e=eo.filter(e=>"Header"===e.type&&(0,c.vE)(et(e))).reduce((e,t)=>{var l;return e+Number((null==t||null==(l=t.inputs)?void 0:l.headerLF)||0)},0);return eo.map(t=>{var l,n,i,a,s,o,d,m,p,h,b,g;let y=et(t),x=null!=(l=(0,r._3)(v(t)))?l:0;if("Header"===t.type){let e=(0,u.Vg)({isLVL:(0,c.DP)(y),headerLF:Number((null==t||null==(n=t.inputs)?void 0:n.headerLF)||0),lvlPieces:Number((null==t||null==(i=t.inputs)?void 0:i.lvlPieces)||0),lvlLength:Number((null==t||null==(a=t.inputs)?void 0:a.lvlLength)||0),boardLenFt:x,wastePct:null!=(s=t.wastePct)?s:5,item:f(t)});return{...t,unit:e.unit,qtyRaw:e.qtyRaw,qtyFinal:e.qtyFinal,unitPrice:e.unitPrice,subtotal:e.subtotal,boardLenFt:x}}if("Post"===t.type){let e=(0,u.uX)({isLinearLF:(0,c.DP)(y)||(0,c.QF)(y),pieces:Number((null==t||null==(o=t.inputs)?void 0:o.pieces)||0),heightFt:Number(null!=(h=null==t||null==(d=t.inputs)?void 0:d.heightFt)?h:M),piecesPerPost:Number((null==t||null==(m=t.inputs)?void 0:m.piecesPerPost)||0),numPosts:Number((null==t||null==(p=t.inputs)?void 0:p.numPosts)||0),wastePct:null!=(b=t.wastePct)?b:5,item:f(t)});return{...t,unit:e.unit,qtyRaw:e.qtyRaw,qtyFinal:e.qtyFinal,unitPrice:e.unitPrice,subtotal:e.subtotal,boardLenFt:x}}if("Headers infill"===t.type){let l=(0,u.y_)({headerLFPool:e,wastePct:null!=(g=t.wastePct)?g:5,item:f(t)});return{...t,unit:l.unit,qtyRaw:l.qtyRaw,qtyFinal:l.qtyFinal,unitPrice:l.unitPrice,subtotal:l.subtotal,boardLenFt:null}}return t})},[eo,M]),ef=(0,i.useMemo)(()=>el.reduce((e,t)=>e+(t.subtotal||0),0)+eb.reduce((e,t)=>e+(t.subtotal||0),0),[el,eb]);(0,i.useEffect)(()=>{var e;let t={id:F,kind:"exterior",lengthLF:Number(C||0),zipSheetsFinal:eu,panelSheets:ei,platePieces:Math.ceil(er),bottomPlatePiecesPanel:Math.ceil((null==(e=en.bottomPlate)?void 0:e.qtyFinal)||0),ptLF:ec,groupSubtotal:ef,bottomBoardLenFt:K,panelPtBoards:ea},l=JSON.stringify(t);l!==k.current&&(k.current=l,null==j||j(t))},[F,C,eu,ei,er,null==(b=en.bottomPlate)?void 0:b.qtyFinal,ec,ef,K,ea,j]);let eg="minmax(180px,1.1fr) 3.7fr 0.6fr 0.6fr 0.7fr 0.6fr 0.9fr 1fr 1.6fr 0.8fr";return(0,n.jsx)("div",{className:"ew-card",children:(0,n.jsxs)(o.A,{title:P,defaultOpen:!0,summary:(0,n.jsxs)("div",{style:{textAlign:"right",fontWeight:700,color:"#f18d5b"},children:["Subtotal: ",p(ef)]}),actions:S?(0,n.jsx)(d.A,{onClick:S,title:"Remove section",label:"Remove section"}):null,children:[(0,n.jsxs)("div",{className:"controls4",style:{marginBottom:12},children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Length (LF)"}),(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",inputMode:"decimal",value:q,onChange:e=>_(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(X(),e.target.blur())},onBlur:X})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Height (ft)"}),(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",inputMode:"decimal",value:M,onChange:e=>R(Number(e.target.value))})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Stud spacing (in)"}),(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",inputMode:"decimal",value:D,onChange:e=>A(Number(e.target.value))})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Studs per location"}),(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",inputMode:"decimal",min:1,value:z,onChange:e=>H(Number(e.target.value))})]})]}),(0,n.jsxs)("div",{className:"ew-grid ew-head",style:{"--cols":eg},children:[(0,n.jsx)("div",{children:"Item"}),(0,n.jsx)("div",{children:"Vendor \xb7 Family \xb7 Size"}),(0,n.jsx)("div",{className:"ew-right",children:"Qty"}),(0,n.jsx)("div",{className:"ew-right",children:"Waste %"}),(0,n.jsx)("div",{className:"ew-right",children:"Final qty"}),(0,n.jsx)("div",{className:"ew-right",children:"Unit"}),(0,n.jsx)("div",{className:"ew-right",children:"Unit price"}),(0,n.jsx)("div",{className:"ew-right",children:"Subtotal"}),(0,n.jsx)("div",{children:"Notes"}),(0,n.jsx)("div",{})]}),(0,n.jsx)("div",{className:"ew-rows",children:el.map(e=>{let t,l="base:".concat(e.key),s=$(l);return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsxs)("div",{className:"ew-grid ew-row",style:{"--cols":eg},children:[(0,n.jsx)("div",{children:e.label}),(0,n.jsx)(a.A,{compact:!0,onSelect:(t=e.key,e=>B(l=>({...l,[t]:e}))),defaultVendor:"Gillies & Prittie Warehouse",defaultFamilyLabel:"sheathing"===e.key?"Green Zip":"bottomPlate"===e.key?L:"SPF#2",preferredSeries:"sheathing"===e.key?void 0:"2x6"}),(0,n.jsx)("div",{className:"ew-right",children:Math.ceil(e.qtyRaw)}),(0,n.jsx)("div",{className:"ew-right",children:(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",inputMode:"decimal",value:e.wastePct,onChange:t=>W(l=>({...l,[e.key]:Number(t.target.value)})),style:{width:80,padding:6,textAlign:"right"}})}),(0,n.jsx)("div",{className:"ew-right",children:e.qtyFinal}),(0,n.jsx)("div",{className:"ew-right",children:e.unit}),(0,n.jsx)("div",{className:"ew-right ew-money",children:e.unitPrice?p(e.unitPrice):"—"}),(0,n.jsx)("div",{className:"ew-right ew-money",children:e.subtotal?p(e.subtotal):"—"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"ew-subtle",style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[(0,n.jsx)("span",{className:"ew-chip",title:s.plan||"",children:s.plan||"—"}),(0,n.jsx)("button",{className:"ew-btn",style:{padding:"4px 8px"},onClick:()=>U(l),children:s.open?"Hide":"Notes"})]}),s.comment&&(0,n.jsx)("div",{className:"ew-subtle",title:s.comment,children:h(s.comment)})]}),(0,n.jsx)("div",{})]}),s.open&&(0,n.jsx)("div",{className:"ew-row",style:{padding:12},children:(0,n.jsxs)("div",{className:"controls2",style:{width:"100%"},children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Plan label"}),(0,n.jsx)("input",{className:"ew-input focus-anim",type:"text",placeholder:"e.g., A2.4 / S5 – Detail 03",value:$(l).plan,onChange:e=>J(l,{plan:e.target.value})})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Comment"}),(0,n.jsx)("textarea",{className:"ew-input focus-anim",rows:3,placeholder:"Add any notes for this item…",value:$(l).comment,onChange:e=>J(l,{comment:e.target.value})})]})]})})]},e.key)})}),(0,n.jsx)("h3",{className:"ew-h3",style:{marginTop:12,marginBottom:6},children:"Extras"}),(0,n.jsx)("div",{className:"ew-rows",children:eb.map(e=>{var t,l,s,u,r,o,m,b,f,g,v;let y="extra:".concat(e.id);return $(y),(0,n.jsxs)(i.Fragment,{children:[(0,n.jsxs)("div",{className:"ew-grid ew-row",style:{"--cols":eg},children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,n.jsx)("span",{style:{fontWeight:600},children:e.type}),"Headers infill"!==e.type&&(0,n.jsx)(d.A,{onClick:S,title:"Remove section",label:"Remove section"})]})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(a.A,{compact:!0,onSelect:t=>eh(e.id,{item:t}),defaultVendor:"Gillies & Prittie Warehouse",defaultFamilyLabel:"Headers infill"===e.type?"CDX SE":"SPF#2"}),"Header"===e.type&&((0,c.DP)(et(e))?(0,n.jsxs)("div",{className:"ew-inline",style:{marginTop:6},children:[(0,n.jsxs)("label",{children:["Pieces",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:(null==(t=e.inputs)?void 0:t.lvlPieces)||"",onChange:t=>eh(e.id,{inputs:{...e.inputs,lvlPieces:Number(t.target.value)}})})]}),(0,n.jsxs)("label",{children:["Length (lf)",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:(null==(l=e.inputs)?void 0:l.lvlLength)||"",onChange:t=>eh(e.id,{inputs:{...e.inputs,lvlLength:Number(t.target.value)}})})]})]}):(0,n.jsx)("div",{className:"ew-inline",style:{marginTop:6},children:(0,n.jsxs)("label",{children:["Total header LF",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:(null==(s=e.inputs)?void 0:s.headerLF)||"",onChange:t=>eh(e.id,{inputs:{...e.inputs,headerLF:Number(t.target.value)}})})]})})),"Post"===e.type&&((0,c.DP)(et(e))||(0,c.QF)(et(e))?(0,n.jsxs)("div",{className:"ew-inline",style:{marginTop:6},children:[(0,n.jsxs)("label",{children:["Pieces",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:(null==(u=e.inputs)?void 0:u.pieces)||"",onChange:t=>eh(e.id,{inputs:{...e.inputs,pieces:Number(t.target.value)}})})]}),(0,n.jsxs)("label",{children:["Height (ft)",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:null!=(b=null==(r=e.inputs)?void 0:r.heightFt)?b:M,onChange:t=>eh(e.id,{inputs:{...e.inputs,heightFt:Number(t.target.value)}})})]})]}):(0,c.O1)(et(e))?(0,n.jsxs)("div",{className:"ew-inline",style:{marginTop:6},children:[(0,n.jsxs)("label",{children:["Pieces per post",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:(null==(o=e.inputs)?void 0:o.piecesPerPost)||"",onChange:t=>eh(e.id,{inputs:{...e.inputs,piecesPerPost:Number(t.target.value)}})})]}),(0,n.jsxs)("label",{children:["Posts (#)",(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",value:(null==(m=e.inputs)?void 0:m.numPosts)||"",onChange:t=>eh(e.id,{inputs:{...e.inputs,numPosts:Number(t.target.value)}})})]})]}):null),"Headers infill"===e.type&&(0,n.jsx)("div",{className:"ew-hint",style:{marginTop:6},children:"QTY = Σ Header LF \xf7 3 \xf7 32 \xd7 2 (then waste)"})]}),(0,n.jsx)("div",{className:"ew-right",children:Math.ceil(null!=(f=e.qtyRaw)?f:0)}),(0,n.jsx)("div",{className:"ew-right",children:(0,n.jsx)("input",{className:"ew-input focus-anim",type:"number",inputMode:"decimal",value:null!=(g=e.wastePct)?g:0,onChange:t=>eh(e.id,{wastePct:Number(t.target.value)}),style:{width:80,textAlign:"right"}})}),(0,n.jsx)("div",{className:"ew-right",children:null!=(v=e.qtyFinal)?v:"—"}),(0,n.jsx)("div",{className:"ew-right",children:e.unit}),(0,n.jsx)("div",{className:"ew-right ew-money",children:e.unitPrice?p(e.unitPrice):"—"}),(0,n.jsx)("div",{className:"ew-right ew-money",children:e.subtotal?p(e.subtotal):"—"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"ew-subtle",style:{display:"flex",gap:8,alignItems:"center",marginBottom:4},children:[(0,n.jsx)("span",{className:"ew-chip",title:$(y).plan||"",children:$(y).plan||"—"}),(0,n.jsx)("button",{className:"ew-btn",style:{padding:"4px 8px"},onClick:()=>U(y),children:$(y).open?"Hide":"Notes"})]}),$(y).comment&&(0,n.jsx)("div",{className:"ew-subtle",title:$(y).comment,children:h($(y).comment)})]}),(0,n.jsx)("div",{})]}),$(y).open&&(0,n.jsx)("div",{className:"ew-row",style:{padding:12},children:(0,n.jsxs)("div",{className:"controls2",style:{width:"100%"},children:[(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Plan label"}),(0,n.jsx)("input",{className:"ew-input focus-anim",type:"text",value:$(y).plan,onChange:e=>J(y,{plan:e.target.value})})]}),(0,n.jsxs)("label",{children:[(0,n.jsx)("span",{className:"ew-subtle",children:"Comment"}),(0,n.jsx)("textarea",{className:"ew-input focus-anim",rows:3,value:$(y).comment,onChange:e=>J(y,{comment:e.target.value})})]})]})})]},e.id)})}),(0,n.jsxs)("div",{className:"ew-footer",children:[(0,n.jsx)("button",{className:"ew-btn",onClick:()=>ep("Header"),children:"➕ Header"}),(0,n.jsx)("button",{className:"ew-btn",onClick:()=>ep("Post"),children:"➕ Post"}),(0,n.jsxs)("div",{className:"ew-right",style:{marginLeft:"auto",color:"#f18d5b"},children:["Group subtotal: ",p(ef)]})]})]})})}}}]);